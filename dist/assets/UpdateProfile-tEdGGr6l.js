import{r as n,u as I,j as e}from"./index-J82VnpFQ.js";import{H as S,U as B}from"./Ufooter-2dqP0I1-.js";import{a as O}from"./axios-1yIDahrL.js";import"./index-C0eKS619.js";import"./index-i_Dcum0C.js";import"./UserRoutes-3nQocaIB.js";import"./axios-L6U4YIEh.js";const U=()=>{const[u,m]=n.useState(""),[f,N]=n.useState([]),[p,i]=n.useState([]),[g,j]=n.useState(null),v=s=>{m(s),i([]),fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(s)}`).then(t=>t.json()).then(t=>{if(t.length>0){const{lat:o,lon:l}=t[0],x=t[0].display_name.split(","),F=x.length>=2?x[0].trim():"";m(F||""),N([parseFloat(l),parseFloat(o)])}}).catch(t=>console.error("Error:",t)),i([])},y=s=>{const t=s.target.value;m(t),clearTimeout(g);let o=setTimeout(()=>{C(t)},2e3);j(o)},C=s=>{fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(s)}`).then(t=>t.json()).then(t=>{const o=t.map(l=>l.display_name);i(o)}).catch(t=>console.error("Error:",t))},w=I(),[b,h]=n.useState(""),[a,d]=n.useState({firstName:"",lastName:"",DOB:"",phoneNumber:"",district:"",pinCode:""}),r=s=>{const{name:t,value:o}=s.target;d(l=>({...l,[t]:o}))},k=s=>{const t=s.target.files[0];d(o=>({...o,userImage:t}))},D=async s=>{s.preventDefault();try{const t={...a,coordinates:f,city:u},o=new FormData;Object.keys(t).forEach(c=>{o.append(c,t[c])}),(await O.put("/user/addDetails",o)).status===200&&w("/user/userProfiles")}catch(t){t.response&&t.response.data.message?h(t.response.data.message):h("An error occured.please try again.")}d({firstName:"",lastName:"",DOB:"",phoneNumber:"",address:{district:"",pinCode:""}})};return e.jsxs("form",{onSubmit:D,className:"max-w-md tm:mx-auto mx-2  my-3 p-3 bg-gradient-to-b from-[#252e53] to-[#4d1438] shadow-xl shadow-slate-800 rounded",children:[e.jsxs("div",{className:"flex md:flex-row flex-col gap-x-10",children:[e.jsxs("div",{className:"md:w-[50%]",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"firstName",className:"block mb-2 text-sm font-medium text-gray-100",children:"First Name"}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:a.firstName,onChange:r,placeholder:"First Name",className:"block w-full px-4 tm:p-1 p-4 border rounded-md focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"lastName",className:"block mb-2 text-sm font-medium text-gray-100",children:"Last Name"}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:a.lastName,onChange:r,placeholder:"Last Name",className:"block w-full px-4 tm:p-1 p-4 border rounded-md focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block mb-2 text-sm font-medium text-gray-100",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:a.phoneNumber,onChange:r,placeholder:"Phone Number",className:"block w-full px-4 tm:p-1 p-4 border rounded-md focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"DOB",className:"block mb-2 text-sm font-medium text-gray-100",children:"Date of Birth"}),e.jsx("input",{type:"date",id:"DOB",name:"DOB",value:a.DOB,onChange:r,placeholder:"Date of Birth",className:"block w-full px-4 tm:p-1 p-4 border rounded-md focus:outline-none focus:border-blue-500"})]})]}),e.jsxs("div",{className:"md:w-[50%]",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"city",className:"block mb-2 text-sm font-medium text-gray-100",children:"city"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"w-full tm:p-1 p-4 border rounded-md focus:outline-none focus:border-blue-500",placeholder:"Enter City",type:"text",value:u,onChange:y}),p.length>0&&e.jsx("div",{className:"bg-white border rounded-md absolute w-full",style:{top:"100%"},children:p.map((s,t)=>e.jsxs("div",{className:"p-1 border-b-gray-500 border-b-2 text-sm",onClick:()=>v(s),children:[s," "]},t))})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"district",className:"block mb-2 text-sm font-medium text-gray-100",children:"District"}),e.jsx("input",{type:"text",id:"district",name:"district",value:a.district,onChange:r,placeholder:"District",className:"block w-full px-4 tm:p-1 p-4 border rounded-md focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"pinCode",className:"block mb-2 text-sm font-medium text-gray-100",children:"PIN Code"}),e.jsx("input",{type:"text",id:"pinCode",name:"pinCode",value:a.pinCode,onChange:r,placeholder:"PIN Code",className:"block w-full px-4 tm:p-1 p-4 border rounded-md focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-white text-sm font-semibold mb-2",htmlFor:"profileImage",children:"image"}),e.jsx("input",{type:"file",id:"userImage",name:"userImage",onChange:k,className:`w-full tm:h-auto h-9 bg-white rounded-2xl block text-sm text-slate-600 focus:outline-none focus:border-blue-500 shadow-md   file:mr-4 file:py-2 file:px-4\r
            file:rounded-full file:border-0\r
            file:text-sm file:font-semibold\r
            file:bg-violet-200 file:text-violet-700\r
            hover:file:bg-violet-100 hover:file:cursor-pointer`})]})]})]}),e.jsx("div",{children:b&&e.jsx("div",{className:"text-red-500 mb-4 text-center",children:b})}),e.jsx("button",{type:"submit",className:"block mx-auto justify-center tm:w-full tm:px-4 px-2 tm:py-2 py-1 mt-4 text-white bg-blue-500 border border-blue-500 rounded-md hover:bg-blue-600",children:"Update Details"})]})},_=()=>e.jsxs("div",{className:"p-1",children:[e.jsx(S,{}),e.jsx(U,{}),e.jsx(B,{})]});export{_ as default};
