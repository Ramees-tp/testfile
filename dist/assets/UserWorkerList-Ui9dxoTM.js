import{r as a,f as H,u as C,j as e}from"./index-J82VnpFQ.js";import{H as _,U as $}from"./Ufooter-2dqP0I1-.js";import{u as A}from"./account-l8IYS-hm.js";import{a as d}from"./axios-1yIDahrL.js";import{F as U,l as O}from"./index-i_Dcum0C.js";import{b as P}from"./index-xM9OYPTF.js";import"./index-C0eKS619.js";import"./UserRoutes-3nQocaIB.js";import"./axios-L6U4YIEh.js";const F=()=>e.jsx("div",{className:"bg-gray-200 tm:p-4 p-2 rounded-xl mb-4",children:e.jsxs("div",{className:"animate-pulse flex space-x-6",children:[e.jsx("div",{className:"rounded-full bg-gray-400 h-12 w-12"}),e.jsxs("div",{className:"flex-1 space-y-4 py-1",children:[e.jsx("div",{className:"h-4 bg-gray-400 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-400 rounded w-1/2"})]})]})});function J(){const[h,l]=a.useState(""),[p,j]=a.useState([]),[k,N]=a.useState(!0),[m,v]=a.useState(!1),[i,y]=a.useState(null),[c,b]=a.useState(null),[n,L]=a.useState(null),[g,x]=a.useState([]),{id:f}=H(),S=C();a.useEffect(()=>{(()=>{const s=JSON.parse(localStorage.getItem("radius"));L((s==null?void 0:s.radius)||8);const r=JSON.parse(localStorage.getItem("userLocation"));if(r){const{center:o}=r,{lat:u,lng:E}=o||{};y(u),b(E)}else l("Location details not found in localStorage.")})()},[i,c,n]),a.useEffect(()=>{(async()=>{try{if(!i||!c||!n){l("Please provide your location Details");return}const s=await d.get(`/user/fetchWorker/${f}`,{params:{latitude:i,longitude:c,radius:n}});s.status===200&&(j(s.data.data),N(!1),l(""))}catch{l("Error fetching worker details.")}})()},[i,c,n,f]),a.useEffect(()=>{(async()=>{try{const s=await d.get("/user/likedList");s.status===200&&x(s.data.data[0].workerId)}catch(s){console.error("Error fetching liked workers:",s)}})()},[]);const D=()=>{v(!m)},W=async(t,s)=>{t.stopPropagation();try{if(g.includes(s)){const r=await d.delete(`/user/unLikeWorker/${s}`);x(o=>o.filter(u=>u!==s))}else{const r=await d.post("/user/likedWorker",{workerId:s});x(o=>[...o,s])}}catch(r){console.error("Error toggling like:",r)}},w=t=>{S(`/user/workerDetails/${t}/${f}`)};return a.useEffect(()=>{window.scrollTo(0,0)},[p]),e.jsxs("div",{className:"md:px-28 sm:px-10 rm:px-6 px-2 bg-[#fffdcb] py-5 sm:min-h-[500px] min-h-[350px]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h1",{className:"sm:text-2xl text-md font-bold mb-5",children:"Awailable Workers :"}),e.jsx("div",{className:"flex justify-end ",children:e.jsx("input",{type:"checkbox",className:"checkbox",checked:m,onChange:D})})]}),e.jsxs("div",{className:"flex flex-col tm:gap-4 gap-2 md:max-w-2xl",children:[k?Array.from({length:5}).map((t,s)=>e.jsx("div",{children:e.jsx(F,{})},s)):p.filter(t=>m?t.isHalfDay:!t.isHalfDay).filter(t=>t.isOnline).map(t=>e.jsx("div",{className:"bg-[#002842] rm:p-3 p-1 rounded-xl cursor-pointer",onClick:()=>w(t._id),children:e.jsxs("div",{className:"flex  items-center",children:[e.jsx("div",{className:"rounded-full bg-[#DDC9AE] sm:p-2 tm:ml-5 ml-2 ",children:e.jsx("img",{src:A,alt:""})}),e.jsxs("div",{className:"bg-slate-200 sm:p-5 p-3 rounded-xl sm:ml-8 ml-4 w-full flex justify-between items-center tm:h-auto h-16",children:[e.jsxs("h1",{className:"font-semibold sm:text-3xl text-xl leading-6",children:[t.firstName," ",t.lastName]}),e.jsx("button",{onClick:s=>W(s,t._id),children:e.jsx(U,{className:"h-8 text-red-900",icon:g.includes(t._id)?O:P})})]})]})},t._id)),e.jsx("div",{children:h&&e.jsx("div",{className:"text-red-500 mb-4 text-center",children:h})})]})]})}function Q(){return e.jsx("div",{children:e.jsxs("div",{className:"p-1",children:[e.jsx(_,{}),e.jsx(J,{}),e.jsx($,{})]})})}export{Q as default};
