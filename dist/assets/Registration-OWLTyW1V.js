import{u as w,a as k,r as o,j as e,L as v,s as y}from"./index-YyWu4Jnp.js";import C from"./DetailsForm-7zVESt4O.js";import D from"./JobForm-uArvM-ih.js";import S from"./PaymentForm-4DKVV0HL.js";import{a as F}from"./axios-jMTBJgDy.js";import"./axios-L6U4YIEh.js";const O=()=>{const x=w(),h=k(),[c,m]=o.useState(""),[f,b]=o.useState(!1),[r,p]=o.useState(0),[a,n]=o.useState({firstName:"",lastName:"",email:"",phoneNumber:"",gender:"",dateOfBirth:"",district:"",city:"",pinCode:"",profileImage:"",jobType:"",workArea:"",coordinates:[null,null],adharNumber:"",IFC:"",accountNumber:"",panCardNumber:"",password:"",confirmPass:""}),[i,g]=o.useState({firstName:!1,lastName:!1,email:!1,phoneNumber:!1,gender:!1,district:!1,dateOfBirth:!1,city:!1,pinCode:!1,profileImage:!1}),l=()=>{for(const s in i)if(!i[s])return!1;return!0},d=["Personal Details","Work Details","Payment Details"],N=()=>{switch(r){case 0:return e.jsx(C,{formData:a,setFormData:n,setFieldCompleted:g,fieldCompleted:i});case 1:return e.jsx(D,{formData:a,setFormData:n});case 2:return e.jsx(S,{formData:a,setFormData:n});default:return null}},j=async()=>{const s=new FormData;Object.keys(a).forEach(t=>{s.append(t,a[t])});try{const t=await F.post("/worker/registration",s,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});if(t.status===200){const u=t.data.Token;localStorage.setItem("jwt",u),h(y(u)),x("/worker/whome")}}catch(t){t.response&&t.response.data&&t.response.data.message?m(t.response.data.message):m("An error occurred during registration.")}};return e.jsx("div",{className:"xl:px-64 lg:px-52 md:px-32 sm:px-16 tm:px-8 p-2 sm:py-10 bg-[#fbffc3]",children:e.jsxs("div",{className:"form",children:[e.jsx("div",{children:c&&e.jsxs("div",{className:"text-red-500 mb-4 text-center",children:[c,e.jsx(v,{to:"/worker/WorkerLogin",children:e.jsx("button",{className:"bg-blue-200 px-2 rounded text-green-800 ml-2",children:"log in"})})]})}),e.jsx("div",{className:"w-full",children:e.jsx("div",{style:{width:r===0?"33.3%":r===1?"66.6%":"100%"},className:"progressBar bg-[#4f662a] h-3 mb-5 rounded"})}),e.jsxs("div",{className:"formContainer  flex flex-col self-end space-y-3  bg-gradient-to-b from-[#252e53] to-[#4d1438] p-5 rounded",children:[e.jsx("div",{className:"header text-2xl sm:text-4xl font-bold mb-2  border-b-2 border-white p-2 text-white",children:d[r]}),e.jsx("div",{className:"body",children:N()}),!l()&&f&&e.jsx("div",{className:"text-red-500 text-center mb-4",children:"Please fill in all fields before proceeding."}),e.jsxs("div",{className:"footer flex",children:[e.jsx("button",{className:"  bg-gray-500 text-white p-2 px-10 rounded-md font-semibold hover:bg-gray-700",disabled:r===0,onClick:()=>{p(s=>s-1)},children:"Prev"}),e.jsx("button",{className:"ml-auto  bg-green-700 text-white p-2 px-10 rounded-md font-semibold hover:bg-green-800 cursor-pointer",onClick:()=>{if(!l()){b(!0);return}r===d.length-1?j():p(s=>s+1)},disabled:!l()&&f,children:r===d.length-1?"Submit":"Next"})]})]})]})})};export{O as default};
